<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Product - Kenshi Shop</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <nav class="navbar">
        <a href="{{ url_for('index') }}" class="navbar-brand">Kenshi Shop</a>
        <ul class="nav-links">
            <li><a href="{{ url_for('admin_dashboard') }}">Dashboard</a></li>
            <li><a href="{{ url_for('manage_products') }}">Manage Products</a></li>
            <li><a href="{{ url_for('add_product') }}">Add Product</a></li>
            <li><a href="{{ url_for('admin_logout') }}">Logout</a></li>
        </ul>
    </nav>

    <div class="container">
        <h1 class="page-title">Edit Product</h1>
        <div class="form-container">
            <form method="post">
                
                <div class="form-group">
                    <label for="name">Product Name:</label>
                    <input type="text" id="name" name="name" required value="{{ product.name }}">
                </div>
                
                <div class="form-group">
                    <label for="description">Features/Description:</label>
                    <textarea id="description" name="description" rows="6">{{ product.description }}</textarea>
                </div>
                
                <div class="form-group">
                    <label for="bonus_freebies">Bonus Freebies (One per line):</label>
                    <textarea id="bonus_freebies" name="bonus_freebies" rows="3">{{ product.bonus_freebies | join('\n') }}</textarea>
                </div>
                
                <div class="form-group">
                    <label for="price">Price (USD):</label>
                    <input type="number" step="0.01" id="price" name="price" required value="{{ product.price }}">
                </div>

                <!-- ADDED: Status dropdown to manually fix stuck products -->
                <div class="form-group">
                    <label for="status">Product Status:</label>
                    <select id="status" name="status" class="form-group">
                        <option value="available" {% if product.status == 'available' %}selected{% endif %}>Available</option>
                        <option value="pending" {% if product.status == 'pending' %}selected{% endif %}>Pending</option>
                    </select>
                </div>

                <div class="form-group" style="background-color: #2c2c2c; padding: 15px; border-radius: 8px;">
                    <h4 style="margin-top: 0;">File Information (Cannot be changed)</h4>
                    <p style="font-size: 0.9em; color: #a0a0a0;">Image File: {{ product.image_filename }}</p>
                    <p style="font-size: 0.9em; color: #a0a0a0;">Product ZIP File: {{ product.script_filename or 'N/A' }}</p>
                    <p style="font-size: 0.8em; color: #888; margin-top: 10px;">To update files, please add the item as a new product.</p>
                </div>
                
                <button type="submit" class="btn">Save Changes</button>
                <a href="{{ url_for('manage_products') }}" style="margin-left: 15px; color: #a0a0a0; text-decoration: none;">Cancel</a>
            </form>
        </div>
    </div>
</body>
</html>